<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Gerencial - Synkro</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/historico.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./js/sessao.js"></script>
</head>

<body onload="validarSessaoSynkro()">
    <div class="layout-principal">

        <aside class="barra-lateral">
            <div class="logo">
                Synkro
            </div>
            <div class="perfil-usuario">
                <img src="./assets/imgs/userSynkro.webp" alt="Foto de perfil padrão">
                <div class="nome-usuario" id="nome_login">Nome Sobrenome</div>
                <div class="cargo-usuario">
                    <i class="ri-shield-user-line"></i>
                    Gerente de Infra
                </div>
                <div class="email-usuario" id="email_login">usuario.email@synkro.com</div>
            </div>
            <nav>
                <ul class="menu-links">
                    <li>
                        <a href="dashboardGerente.html">
                            <i class="ri-dashboard-3-line"></i>
                            Visão Geral
                        </a>
                    </li>
                    <li>
                        <a href="historico.html" class="ativo">
                            <i class="ri-file-add-line icon-cadastro"></i>
                            Logs e Histórico
                        </a>
                    </li>
                    <li>
                        <a href="Funcionarios.html">
                            <i class="ri-database-2-line"></i>
                            Funcionários cadastrados
                        </a>
                    </li>
                </ul>
                <button class="btn-sair" onclick="limparSessao()">
                    <i class="ri-logout-box-r-line"></i>
                    Encerrar Sessão
                </button>
            </nav>
        </aside>

        <main class="conteudo-principal">

            <div class="grid-estatisticas">
                <div class="card-estatistica">
                    <div class="valor-estatistica">99.8%</div>
                    <div class="rotulo-estatistica">Disponibilidade no Mês</div>
                </div>
                <div class="card-estatistica">
                    <div class="valor-estatistica">1.25k</div>
                    <div class="rotulo-estatistica">Total de Eventos</div>
                </div>
                <div class="card-estatistica">
                    <div class="valor-estatistica">48</div>
                    <div class="rotulo-estatistica">Críticos Resolvidos</div>
                </div>
                <div class="card-estatistica">
                    <div class="valor-estatistica">2.1s</div>
                    <div class="rotulo-estatistica">Tempo Médio de Resposta</div>
                </div>
            </div>

            <header class="historico-header">
                <h1>Histórico de Eventos e Logs do Mainframe</h1>
                <p>Visualize indicadores-chave e a sequência cronológica de todos os eventos do sistema principal.</p>
            </header>

            <div class="dashboard-grid">

                <section class="visao-estrategica">
                    <div class="widget widget-alertas">
                        <h3>Histórico de Alertas (Logs Recentes)</h3>
                        <ul>
                            <li class="alerta-item critical">
                                <span class="time">18/10/25 • 12:12</span>
                                <span class="tag">MFR-01</span>
                                <span class="alerta-desc"><strong>Alerta Crítico de CPU</strong> — Operações</span>
                                <span class="status">NÃO RESOLVIDO</span>
                            </li>
                            <li class="alerta-item warning">
                                <span class="time">18/10/25 • 12:45</span>
                                <span class="tag">MFR-02</span>
                                <span class="alerta-desc"><strong>Uso de Memória Alto</strong> — Ops</span>
                                <span class="status">EM PROGRESSO</span>
                            </li>
                            <li class="alerta-item info">
                                <span class="time">18/10/25 • 13:00</span>
                                <span class="tag">MFR-03</span>
                                <span class="alerta-desc"><strong>Aviso de Disco</strong> — Armazenamento</span>
                                <span class="status">NOTIF. ENVIADA</span>
                            </li>
                            <li class="alerta-item critical">
                                <span class="time">18/10/25 • 12:12</span>
                                <span class="tag">MFR-01</span>
                                <span class="alerta-desc"><strong>Alerta Crítico de CPU</strong> — Operações</span>
                                <span class="status">NÃO RESOLVIDO</span>
                            </li>
                            <li class="alerta-item warning">
                                <span class="time">18/10/25 • 12:45</span>
                                <span class="tag">MFR-02</span>
                                <span class="alerta-desc"><strong>Uso de Memória Alto</strong> — Ops</span>
                                <span class="status">EM PROGRESSO</span>
                            </li>
                            <li class="alerta-item info">
                                <span class="time">18/10/25 • 13:00</span>
                                <span class="tag">MFR-03</span>
                                <span class="alerta-desc"><strong>Aviso de Disco</strong> — Armazenamento</span>
                                <span class="status">NOTIF. ENVIADA</span>
                            </li>
                            <li class="alerta-item critical">
                                <span class="time">18/10/25 • 12:12</span>
                                <span class="tag">MFR-01</span>
                                <span class="alerta-desc"><strong>Alerta Crítico de CPU</strong> — Operações</span>
                                <span class="status">NÃO RESOLVIDO</span>
                            </li>
                            <li class="alerta-item warning">
                                <span class="time">18/10/25 • 12:45</span>
                                <span class="tag">MFR-02</span>
                                <span class="alerta-desc"><strong>Uso de Memória Alto</strong> — Ops</span>
                                <span class="status">EM PROGRESSO</span>
                            </li>
                            <li class="alerta-item info">
                                <span class="time">18/10/25 • 13:00</span>
                                <span class="tag">MFR-03</span>
                                <span class="alerta-desc"><strong>Aviso de Disco</strong> — Armazenamento</span>
                                <span class="status">NOTIF. ENVIADA</span>
                            </li>
                            <li class="alerta-item warning">
                                <span class="time">18/10/25 • 12:45</span>
                                <span class="tag">MFR-02</span>
                                <span class="alerta-desc"><strong>Uso de Memória Alto</strong> — Ops</span>
                                <span class="status">EM PROGRESSO</span>
                            </li>
                            <li class="alerta-item info">
                                <span class="time">18/10/25 • 13:00</span>
                                <span class="tag">MFR-03</span>
                                <span class="alerta-desc"><strong>Aviso de Disco</strong> — Armazenamento</span>
                                <span class="status">NOTIF. ENVIADA</span>
                            </li>
                            <li class="alerta-item info">
                                <span class="time">18/10/25 • 13:00</span>
                                <span class="tag">MFR-03</span>
                                <span class="alerta-desc"><strong>Aviso de Disco</strong> — Armazenamento</span>
                                <span class="status">NOTIF. ENVIADA</span>
                            </li>
                            <li class="alerta-item info">
                                <span class="time">18/10/25 • 13:00</span>
                                <span class="tag">MFR-03</span>
                                <span class="alerta-desc"><strong>Aviso de Disco</strong> — Armazenamento</span>
                                <span class="status">NOTIF. ENVIADA</span>
                            </li>
                        </ul>
                    </div>
                </section>

                <aside class="mainframes-cadastrados">

                    <div class="widget widget-grafico-pizza">
                        <h3>Distribuição Global de Alertas</h3>
                        <canvas id="pieChart" width="300" height="250"></canvas>
                    </div>

                    <div class="widget widget-metrica-agregada">
                        <h3>Métricas do Período</h3>
                        <ul>
                            <li><strong>Alertas Críticos:</strong> 48 Registrados</li>
                            <li><strong>Tempo de Inatividade:</strong> 5h 25m</li>
                            <li><strong>Maior Pico de CPU:</strong> MFR-01 (97%)</li>
                            <li><strong>Logs Processados:</strong> 1.2M logs</li>
                        </ul>
                    </div>
                </aside>
            </div>

            <div class="container-linha-do-tempo widget">
                <h3>Linha do Tempo de Eventos</h3>
                <div class="linha-do-tempo">

                    <div class="item-linha-do-tempo">
                        <div class="conteudo-linha-do-tempo">
                            <div class="horario-linha-do-tempo">10:45</div>
                            <div class="titulo-linha-do-tempo">Alerta de CPU (MFR-01)</div>
                            <div class="descricao-linha-do-tempo">Uso da CPU acima de 90% no MFR-01</div>
                        </div>
                    </div>

                    <div class="item-linha-do-tempo">
                        <div class="conteudo-linha-do-tempo">
                            <div class="horario-linha-do-tempo">11:15</div>
                            <div class="titulo-linha-do-tempo">Alerta de Memória (MFR-02)</div>
                            <div class="descricao-linha-do-tempo">Uso da memória acima de 80% no MFR-02</div>
                        </div>
                    </div>

                    <div class="item-linha-do-tempo">
                        <div class="conteudo-linha-do-tempo">
                            <div class="horario-linha-do-tempo">12:00</div>
                            <div class="titulo-linha-do-tempo">Alerta de Disco (MFR-03)</div>
                            <div class="descricao-linha-do-tempo">Disco /var quase cheio no MFR-03</div>
                            <div class="descricao-linha-do-tempo">Disco /var quase cheio no MFR-03</div>
                        </div>
                    </div>

                </div>
            </div>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const ctx = document.getElementById('pieChart').getContext('2d');
            const cores = [
                '#ef4444',
                '#f59e0b',
                '#38bdf8'
            ];

            const pieChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Critico', 'Urgente', 'Normal'],
                    datasets: [{
                        data: [3, 15, 25],
                        backgroundColor: cores,
                        hoverOffset: 8,
                        borderColor: '#1e293b',
                        borderWidth: 2,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom',
                            labels: {
                                color: '#cbd5e1',
                                font: {
                                    size: 13,
                                    family: 'Inter',
                                    weight: 500
                                },
                                padding: 15
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(30, 41, 59, 0.9)',
                            titleColor: '#f8fafc',
                            bodyColor: '#cbd5e1',
                            borderColor: '#38bdf8',
                            borderWidth: 1,
                            cornerRadius: 6
                        }
                    }
                }
            });
        });
    </script>
</body>

</html>